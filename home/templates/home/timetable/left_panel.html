{% load static %}
{% load org_tags %}
{% load category_tags %}
<div class="left-panel p-3 border-end overflow-auto">

    {# 검색 섹션 헤더 #}
    <div class="search-section-header mb-3">
        <h5 class="fw-bold">강의 검색</h5>
        <hr class="my-2">
    </div>

    {# 교과목 분류(카테고리) 선택하는 드롭다운 #}
    {% category_dropdown %}

    {# 전공 선택시 나타나는 학과(부) 드롭다운 #}
    <div id="org-container" style="display:none;">
        {% org_dropdowns %}
    </div>

    {# 강의명 검색 섹션 #}
    <div class="search-input-section mb-3">
        <div class="divider-or text-center my-3">
            <span class="bg-light px-2">또는</span>
        </div>
        <div id="course-name-search-container" class="mb-3">
            <label for="course_name_search" class="form-label fw-bold">강의명으로 검색</label>
            <input type="text" id="course_name_search" class="form-control" placeholder="강의명을 입력하세요">
        </div>
    </div>

    {# 버튼 섹션 #}
    <div class="button-section d-flex gap-2 mb-3">
        <button id="search-button" class="btn flex-fill">
            <span>검색</span>
        </button>
        <button id="reset-button" class="btn flex-fill">
            <span>초기화</span>
        </button>
    </div>

    {# 설문조사 버튼 #}
    <div class="survey-section mb-3">
        <button id="survey-button" class="btn w-100" onclick="showSurvey()">
            <span>AI 시간표 생성</span>
        </button>
    </div>

    {# 검색 결과 섹션 #}
    <div class="results-section-header mb-2">
        <h6 class="fw-bold d-flex justify-content-between align-items-center">
            <span>검색 결과</span>
            <span id="result-count" class="badge bg-secondary">0</span>
        </h6>
        <hr class="my-2">
    </div>

    {# 결과 테이블 #}
    <div id="course-results-container" class="course-list-container">
        <div id="course-list-body">
            <div class="text-center text-muted py-4">
                <i>검색 조건을 선택하고 검색 버튼을 클릭하세요</i>
            </div>
        </div>
    </div>

    {# 상세 정보 모달 #}
    <div id="course-popup" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 id="popup-title" class="modal-title"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p><strong>교과목번호:</strong> <span id="popup-code"></span></p>
                    <p><strong>분반:</strong> <span id="popup-section"></span></p>
                    <p><strong>대상 학년:</strong> <span id="popup-year"></span></p>
                    <p><strong>학점:</strong> <span id="popup-credits"></span></p>
                    <p><strong>교수:</strong> <span id="popup-instructor"></span></p>
                    <p><strong>그룹 활동:</strong> <span id="popup-group"></span></p>
                    <p><strong>시간표 / 강의실:</strong><br><span id="popup-schedules"></span></p>
                    <hr>
                    <h6>강의 요약</h6>
                    <p id="popup-summary" style="white-space:pre-wrap;"></p>
                </div>
                <div class="modal-footer">
                    <button id="view-reviews-button" type="button" class="btn me-auto btn-warning">강의 평가 보기</button>
                    <button id="add-to-timetable-btn-popup" type="button" class="btn">시간표에 추가</button>
                    <button class="btn btn-secondary" style="color:#000" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>