<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ì‹œê°„í‘œ ìƒì„±</title>

    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'home/css/base_style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'home/css/timetable_style.css' %}">

    <!-- âœ… ë¶€íŠ¸ìŠ¤íŠ¸ë© CSS ì¶”ê°€ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
</head>
<body>
    <!-- âœ… header -->
    <header>
        <nav class="navigation">
            <a href="{% url 'dashboard' %}" class="logo">
                <img src="https://github.com/KSM017/ImageSource/blob/main/002.png?raw=true" alt="ë¡œê³ ">
            </a>
            <div class="nav-links">
                <a href="{% url 'dashboard' %}">Home<span></span></a>
                <a href="#">MyPage<span></span></a>
                <a href="{% url 'timetable' %}">TimeTable<span></span></a>
                <a href="#">Logout<span></span></a>
            </div>
        </nav>
    </header> 
    <!-- âœ… end header -->

    <div class="container-fluid">
        <!-- ì™¼ìª½ -->
        <div class="left-panel">
            <!-- âœ… ê²€ìƒ‰ì°½ ë° í•„í„° ë²„íŠ¼ -->
            <div class="course-search-container">
                <input type="text" id="course-search" placeholder="ê°•ì˜ ê²€ìƒ‰..." class="course-search">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-type="all">ì „ì²´</button>
                    <button class="filter-btn" data-type="major_required">ì „ê³µí•„ìˆ˜</button>
                    <button class="filter-btn" data-type="major_elective">ì „ê³µì„ íƒ</button>
                    <button class="filter-btn" data-type="general_elective">êµì–‘ì„ íƒ</button>
                    <button class="filter-btn" data-type="free_elective">ì¼ë°˜ì„ íƒ</button>
                    <button class="filter-btn" data-type="teaching_required">êµì§í•„ìˆ˜</button>
                </div>
            </div>
        
            <!-- âœ… ê°•ì˜ ë¦¬ìŠ¤íŠ¸ -->
            <div class="course-list-container">
                <!-- ì „ê³µ í•„ìˆ˜ -->
                <div class="course-category" id="major-required">
                    {% for course in major_required %}
                      {% with schedule=course.courseschedule_set.all|first %}
                      <div class="course-item" data-type="major_required"
                           {% if schedule %}
                             data-day="{{ schedule.day }}" 
                             data-times="{{ schedule.times }}"
                           {% else %}
                             data-day="" data-times=""
                           {% endif %}>
                          <div class="course-name">{{ course.course_name }}</div>
                          <div class="course-info">
                              <span class="instructor">{{ course.instructor }}</span>
                              <span class="credit">{{ course.credit }}í•™ì </span>
                              <span class="year">{{ course.year }}</span>
                              <span class="section">{{ course.section }}</span>
                          </div>
                          <div class="course-meta">
                              {% if schedule %}
                                <span class="course-schedule">({{ schedule.day }} / {{ schedule.times }})</span>
                              {% else %}
                                <span class="course-schedule">(ìŠ¤ì¼€ì¤„ ì •ë³´ ì—†ìŒ)</span>
                              {% endif %}
                          </div>
                          <button class="add-course-btn">ì¶”ê°€</button>
                      </div>
                      {% endwith %}
                    {% empty %}
                      <p class="no-courses">ì „ê³µ í•„ìˆ˜ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    {% endfor %}
                </div>
                <!-- ì „ê³µ ì„ íƒ -->
                <div class="course-category" id="major-elective">
                    {% for course in major_elective %}
                      {% with schedule=course.courseschedule_set.all|first %}
                      <div class="course-item" data-type="major_elective"
                           {% if schedule %}
                             data-day="{{ schedule.day }}" 
                             data-times="{{ schedule.times }}"
                           {% else %}
                             data-day="" data-times=""
                           {% endif %}>
                          <div class="course-name">{{ course.course_name }}</div>
                          <div class="course-info">
                              <span class="instructor">{{ course.instructor }}</span>
                              <span class="credit">{{ course.credit }}í•™ì </span>
                              <span class="year">{{ course.year }}</span>
                              <span class="section">{{ course.section }}</span>
                          </div>
                          <div class="course-meta">
                              {% if schedule %}
                                <span class="course-schedule">({{ schedule.day }} / {{ schedule.times }})</span>
                              {% else %}
                                <span class="course-schedule">(ìŠ¤ì¼€ì¤„ ì •ë³´ ì—†ìŒ)</span>
                              {% endif %}
                          </div>
                          <button class="add-course-btn">ì¶”ê°€</button>
                      </div>
                      {% endwith %}
                    {% empty %}
                      <p class="no-courses">ì „ê³µ ì„ íƒ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    {% endfor %}
                </div>
                <!-- êµì–‘ ì„ íƒ -->
                <div class="course-category" id="general-elective">
                    {% for course in general_elective %}
                      {% with schedule=course.courseschedule_set.all|first %}
                      <div class="course-item" data-type="general_elective"
                           {% if schedule %}
                             data-day="{{ schedule.day }}" 
                             data-times="{{ schedule.times }}"
                           {% else %}
                             data-day="" data-times=""
                           {% endif %}>
                          <div class="course-name">{{ course.course_name }}</div>
                          <div class="course-info">
                              <span class="instructor">{{ course.instructor }}</span>
                              <span class="credit">{{ course.credit }}í•™ì </span>
                              <span class="year">{{ course.year }}</span>
                              <span class="section">{{ course.section }}</span>
                          </div>
                          <div class="course-meta">
                              {% if schedule %}
                                <span class="course-schedule">({{ schedule.day }} / {{ schedule.times }})</span>
                              {% else %}
                                <span class="course-schedule">(ìŠ¤ì¼€ì¤„ ì •ë³´ ì—†ìŒ)</span>
                              {% endif %}
                          </div>
                          <button class="add-course-btn">ì¶”ê°€</button>
                      </div>
                      {% endwith %}
                    {% empty %}
                      <p class="no-courses">êµì–‘ ì„ íƒ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    {% endfor %}
                </div>
                <!-- ì¼ë°˜ ì„ íƒ -->
                <div class="course-category" id="free-elective">
                    {% for course in free_elective %}
                      {% with schedule=course.courseschedule_set.all|first %}
                      <div class="course-item" data-type="free_elective"
                           {% if schedule %}
                             data-day="{{ schedule.day }}" 
                             data-times="{{ schedule.times }}"
                           {% else %}
                             data-day="" data-times=""
                           {% endif %}>
                          <div class="course-name">{{ course.course_name }}</div>
                          <div class="course-info">
                              <span class="instructor">{{ course.instructor }}</span>
                              <span class="credit">{{ course.credit }}í•™ì </span>
                              <span class="year">{{ course.year }}</span>
                              <span class="section">{{ course.section }}</span>
                          </div>
                          <div class="course-meta">
                              {% if schedule %}
                                <span class="course-schedule">({{ schedule.day }} / {{ schedule.times }})</span>
                              {% else %}
                                <span class="course-schedule">(ìŠ¤ì¼€ì¤„ ì •ë³´ ì—†ìŒ)</span>
                              {% endif %}
                          </div>
                          <button class="add-course-btn">ì¶”ê°€</button>
                      </div>
                      {% endwith %}
                    {% empty %}
                      <p class="no-courses">ì¼ë°˜ ì„ íƒ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    {% endfor %}
                </div>
                <!-- êµì§ í•„ìˆ˜ -->
                <div class="course-category" id="teaching-required">
                    {% for course in teaching_required %}
                      {% with schedule=course.courseschedule_set.all|first %}
                      <div class="course-item" data-type="teaching_required"
                           {% if schedule %}
                             data-day="{{ schedule.day }}" 
                             data-times="{{ schedule.times }}"
                           {% else %}
                             data-day="" data-times=""
                           {% endif %}>
                          <div class="course-name">{{ course.course_name }}</div>
                          <div class="course-info">
                              <span class="instructor">{{ course.instructor }}</span>
                              <span class="credit">{{ course.credit }}í•™ì </span>
                              <span class="year">{{ course.year }}</span>
                              <span class="section">{{ course.section }}</span>
                          </div>
                          <div class="course-meta">
                              {% if schedule %}
                                <span class="course-schedule">({{ schedule.day }} / {{ schedule.times }})</span>
                              {% else %}
                                <span class="course-schedule">(ìŠ¤ì¼€ì¤„ ì •ë³´ ì—†ìŒ)</span>
                              {% endif %}
                          </div>
                          <button class="add-course-btn">ì¶”ê°€</button>
                      </div>
                      {% endwith %}
                    {% empty %}
                      <p class="no-courses">êµì§ í•„ìˆ˜ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
        
        <!-- ê°€ìš´ë°: ì‹œê°„í‘œ -->
        <div class="middle-panel">
            <table class="timetable">
                <thead>
                    <tr>
                        <th>ì‹œê°„</th>
                        <th>ì›”</th>
                        <th>í™”</th>
                        <th>ìˆ˜</th>
                        <th>ëª©</th>
                        <th>ê¸ˆ</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- ì˜¤ì „ 8ì‹œ ~ ì˜¤í›„ 8ì‹œ (1ì‹œê°„ ë‹¨ìœ„) -->
                    <script>
                        const timetableBody = document.querySelector(".timetable tbody");
                        for (let hour = 8; hour <= 20; hour++) {
                            const row = document.createElement("tr");
                            const timeCell = document.createElement("td");
                            timeCell.textContent = `${hour}:00`;
                            row.appendChild(timeCell);
                            for (let i = 0; i < 5; i++) {
                                const cell = document.createElement("td");
                                cell.classList.add("timetable-cell");
                                cell.setAttribute("data-hour", hour);
                                cell.setAttribute("data-day", i);
                                row.appendChild(cell);
                            }
                            timetableBody.appendChild(row);
                        }
                    </script>
                </tbody>
            </table>
        </div>
        
        <!-- ì˜¤ë¥¸ìª½: ì„¤ì • ë° íƒìƒ‰ -->
        <div class="right-panel">
            <div class="goal-settings">
                <h3>ëª©í‘œ í•™ì  ì„¤ì • ğŸ¯</h3>
                <div class="goal-inputs">
                    <label for="total-credits">ì´ ëª©í‘œ í•™ì  (ìµœëŒ€ 24):</label>
                    <input type="number" id="total-credits" min="1" max="24" value="18">
                    
                    <label for="major-credits">ì „ê³µ í•™ì :</label>
                    <input type="number" id="major-credits" min="0" max="24" value="9">
                    
                    <label for="elective-credits">êµì–‘ í•™ì :</label>
                    <input type="number" id="elective-credits" min="0" max="24" value="9">
                </div>
            </div>
        
            <div class="day-off-settings">
                <h3>ê³µê°• ìš”ì¼ ì„ íƒ ğŸ“…</h3>
                <div class="day-options">
                    <label><input type="checkbox" value="ì›”"> ì›”</label>
                    <label><input type="checkbox" value="í™”"> í™”</label>
                    <label><input type="checkbox" value="ìˆ˜"> ìˆ˜</label>
                    <label><input type="checkbox" value="ëª©"> ëª©</label>
                    <label><input type="checkbox" value="ê¸ˆ"> ê¸ˆ</label>
                </div>
            </div>
        
            <button id="generate-btn">ğŸ“… ì‹œê°„í‘œ ìƒì„±</button>
        
            <div class="timetable-navigation">
                <button id="prev-timetable" class="nav-arrow">â—€</button>
                <span id="timetable-index">1 / 1</span>
                <button id="next-timetable" class="nav-arrow">â–¶</button>
            </div>
        
            <button id="save-timetable-btn">ğŸ’¾ í˜„ì¬ ì‹œê°„í‘œ ì €ì¥</button>
        </div>
    </div>

    <!-- âœ… ë¶€íŠ¸ìŠ¤íŠ¸ë© JS ì¶”ê°€ -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- âœ… í†µí•©ëœ JS íŒŒì¼ ì—°ê²° (íŒ€ì› ì½”ë“œ + ì¶”ê°€ ê¸°ëŠ¥) -->
    <script src="{% static 'home/js/timetable_script.js' %}"></script>
</body>
</html>
