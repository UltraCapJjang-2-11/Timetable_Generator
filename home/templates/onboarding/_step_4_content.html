<div class="card">
    <div class="row g-0">
        <div class="col-md-4 border-end">
            <div class="p-3">
                <div class="summary-box mb-3">
                    <h6 class="text-muted">전체 요약</h6>
                    <p class="mb-1"><strong>총 이수 학점:</strong> <span id="total-credits">0</span></p>
                    <p class="mb-0"><strong>전체 평점 평균:</strong> <span id="total-gpa">0.00</span></p>
                </div>
                <h6 class="text-muted">학기 목록</h6>
                <ul id="semester-list" class="list-group" style="max-height: 250px; overflow-y: auto;">
                </ul>
                <div class="d-grid mt-3">
                    <button id="add-semester-btn" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#add-semester-modal">학기 추가하기</button>
                </div>
            </div>
        </div>

        <div class="col-md-8">
            <div class="p-3">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="summary-box">
                        <h5 id="semester-title">학기를 선택하세요</h5>
                        <p class="mb-0 text-muted">이수 학점: <span id="semester-credits">0</span> | 평점 평균: <span id="semester-gpa">0.00</span></p>
                    </div>
                    <button id="view-course-history-btn" class="btn btn-outline-secondary btn-sm"
                            data-bs-toggle="modal" data-bs-target="#course-history-modal">
                        <i class="bi bi-file-earmark-pdf"></i> 원본 보기
                    </button>
                </div>

                <div id="course-list" style="max-height: 300px; overflow-y: auto;">
                </div>
                <div class="d-grid mt-3">
                    <button id="add-course-btn" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#add-course-modal"><i class="bi bi-plus-lg"></i> 이 학기에 강의 추가</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="d-flex justify-content-between mt-4">
    <button type="button" class="btn btn-secondary prev-btn">이전 단계</button>
    <button type="button" class="btn btn-primary next-btn">다음 단계로</button>
</div>

<div class="modal fade" id="add-semester-modal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">학기 추가</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="row g-3">
              <div class="col-6">
                <label for="new-semester-year" class="form-label">년도</label>
                  <select id="new-semester-year" class="form-select">
                  <option value="">선택</option>
                </select>
              </div>
              <div class="col-6">
                <label for="new-semester-term" class="form-label">학기</label>
                <select id="new-semester-term" class="form-select">
                  <option value="">선택</option>
                  <option value="1학기">1학기</option>
                  <option value="2학기">2학기</option>
                  <option value="여름">여름</option>
                  <option value="겨울">겨울</option>
                </select>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
            <button type="button" id="confirm-add-semester" class="btn btn-primary">추가</button>
          </div>
        </div>
      </div>
</div>

<div class="modal fade" id="add-course-modal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal-title">이 학기에 강의 추가</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-8 border-end">
                        {% include 'home/dropdown/_category_dropdown.html' %}
                        <!-- 모달 내 전용 검색 버튼 및 결과 -->
                        <button id="modal-search-btn" class="btn btn-primary w-100 mb-3">강의 검색</button>
                        <div id="modal-results-container" class="course-list-container">
                          <table class="table table-sm table-hover align-middle mb-0">
                            <thead class="sticky-top" style="background-color: #ffcd4a; color: #333;">
                               <tr>
                                <th style="width:35%;">강의명</th>
                                <th style="width:20%;">과목코드</th>
                                <th style="width:10%;" class="text-center">학점</th>
                                <th style="width:15%;" class="text-center">동작</th>
                              </tr>
                            </thead>
                            <tbody id="modal-results-body"></tbody>
                          </table>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div id="selected-courses-container">
                            <h6 class="sticky-top bg-light p-2 rounded">담은 강의</h6>
                            <ul id="selected-courses-list" class="list-group list-group-flush"></ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                <button type="button" id="confirm-add-courses" class="btn btn-primary">선택 완료</button>
            </div>
        </div>
    </div>
</div>

{# PDF 뷰어 모달 #}
<div class="modal fade" id="course-history-modal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalLabel">이수 내역 원본 보기</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="height: 75vh;">
                {% include 'onboarding/includes/_pdf_viewer.html' %}
            </div>
        </div>
    </div>
</div>

{% load static %}
<script src="{% static 'home/js/dropdown/org_dropdown.js' %}" type="module"></script>
<script src="{% static 'home/js/dropdown/category_dropdown.js' %}" type="module"></script>